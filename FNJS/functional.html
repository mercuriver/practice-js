<script>
  var users = [
    { id: 1, name: 'ID', age: 36 },
    { id: 2, name: 'BJ', age: 32 },
    { id: 3, name: 'JM', age: 32 },
    { id: 4, name: 'PJ', age: 27 },
    { id: 5, name: 'HA', age: 25 },
    { id: 6, name: 'JE', age: 26 },
    { id: 7, name: 'JI', age: 31 },
    { id: 8, name: 'MP', age: 23 },
  ];

  // var temp_users = [];
  // for (var i = 0; i < users.length; i++) {
  //   if (users[i].age >= 30) {
  //     temp_users.push(users[i]);
  //   }
  // }
  // console.log(temp_users);

  // var names = [];
  // for (var i = 0; i < temp_users.length; i++) {
  //   names.push(temp_users[i].name);
  // }
  // console.log(names);

  // var temp_users = [];
  // for (var i = 0; i < users.length; i++) {
  //   if (users[i].age < 30) {
  //     temp_users.push(users[i]);
  //   }
  // }
  // console.log(temp_users);

  // var ages = [];
  // for (var i = 0; i < temp_users.length; i++) {
  //   ages.push(temp_users[i].age);
  // }
  // console.log(ages);

  function _filter(list, predi) {
    var new_list = [];
    for (var i = 0; i < list.length; i++) {
      if (predi(list[i])) {
        new_list.push(list[i]);
      }
    }
    return new_list;
  }

  function _map(list, mapper) {
    var new_list = [];
    for (var i = 0; i < list.length; i++) {
      new_list.push(mapper(list[i]));
    }
    return new_list;
  }

  // 함수형 프로그래밍은 값을 선언 후 진행하는 것이 아닌,
  // 함수를 통해 한번에 값을 만들어내는 것이 바람직하다.
  // 때문에 변수 할당은 최소화하는 것이 좋음

  console.log(
    _map(
      _filter(users, function (user) {
        return user.age >= 30;
      }),
      function (user) {
        return user.name;
      }
    )
  );

  console.log(
    _map(
      _filter(users, function (user) {
        return user.age < 30;
      }),
      function (user) {
        return user.age;
      }
    )
  );
</script>
